<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>uhppoted-tunnel</title>
    <link rel="manifest"   href="./manifest.json">
    <link rel="icon"       href="./images/favicon.svg">
    <link rel="stylesheet" href="./css/tunnel.css" type="text/css">
    <meta charset="UTF-8">
  </head>
  <body> 
    <div id="content">
      <header>
        <img id="logo" src="./images/logo.png" />
        <h1>UDP Tunnel</h1>
        <div>
          <button onclick="onClear(event)">clear</button>
        </div>
      </header>
    
      <main>
        <div id="list" class="panel">
          <ul>
            <li onclick="onSelect(event)" data-cmd="get-all-controllers">get-all-controllers</li>
            <li class="spacer"></li>
            <li onclick="onSelect(event)" data-cmd="get-controller">get-controller</li>
            <li onclick="onSelect(event)" data-cmd="set-IP">set-IP</li>
            <li onclick="onSelect(event)" data-cmd="get-listener">get-listener</li>
            <li onclick="onSelect(event)" data-cmd="set-listener">set-listener</li>
            <li onclick="onSelect(event)" data-cmd="get-time">get-time</li>
            <li onclick="onSelect(event)" data-cmd="set-time">set-time</li>
            <li onclick="onSelect(event)" data-cmd="get-door-control">get-door-control</li>
            <li onclick="onSelect(event)" data-cmd="set-door-control">set-door-control</li>
            <li onclick="onSelect(event)" data-cmd="set-door-passcodes">set-door-passcodes</li>
            <li onclick="onSelect(event)" data-cmd="open-door">open-door</li>
            <li onclick="onSelect(event)" data-cmd="get-status">get-status</li>
            <li class="spacer"></li>
            <li onclick="onSelect(event)" data-cmd="get-cards">get-cards</li>
            <li onclick="onSelect(event)" data-cmd="get-card">get-card</li>
            <li onclick="onSelect(event)" data-cmd="get-card-by-index">get-card-by-index</li>
            <li onclick="onSelect(event)" data-cmd="put-card">put-card</li>
            <li onclick="onSelect(event)" data-cmd="delete-card">delete-card</li>
            <li onclick="onSelect(event)" data-cmd="delete-all-cards">delete-all-cards</li>
            <li class="spacer"></li>
            <li onclick="onSelect(event)" data-cmd="get-event">get-event</li>
            <li onclick="onSelect(event)" data-cmd="get-event-index">get-event-index</li>
            <li onclick="onSelect(event)" data-cmd="set-event-index">set-event-index</li>
            <li onclick="onSelect(event)" data-cmd="record-special-events">record-special-events</li>
            <li class="spacer"></li>
            <li onclick="onSelect(event)" data-cmd="get-time-profile">get-time-profile</li>
            <li onclick="onSelect(event)" data-cmd="set-time-profile">set-time-profile</li>
            <li onclick="onSelect(event)" data-cmd="delete-all-time-profiles">delete-all-time-profiles</li>
            <li class="spacer"></li>
            <li onclick="onSelect(event)" data-cmd="add-task">add-task</li>
            <li onclick="onSelect(event)" data-cmd="refresh-tasklist">refresh-tasklist</li>
            <li onclick="onSelect(event)" data-cmd="clear-tasklist">clear-tasklist</li>
            <li class="spacer"></li>
            <li onclick="onSelect(event)" data-cmd="set-pc-control">set-pc-control</li>
            <li onclick="onSelect(event)" data-cmd="set-interlock">set-interlock</li>
            <li onclick="onSelect(event)" data-cmd="activate-keypads">activate-keypads</li>
            <li onclick="onSelect(event)" data-cmd="restore-default-parameters">restore-default-parameters</li>
          </ul>
        </div>

        <div id="command" class="panel">
          <div class="executor">
            <input id="cmd" type="text" readonly />
            <button id="execute" onclick="onExecute(event)" disabled>execute</button>              
          </div>

          <div class="section controller">
            <div class="section-label">controller</div>
            <input id="controller" class="parameter-value" type="number" min="1" max="499999999" data-tag="controller" />
          </div>

          <div class="section IP">
            <div class="section-label">IPv4 configuration</div>
            <label for="ip-address" class="parameter-label">address</label>
            <input id="ip-address"  class="parameter-value" type="text" placeholder="IPv4 address" data-tag="IP.address" />
            
            <label for="ip-netmask" class="parameter-label">net mask</label>
            <input id="ip-netmask"  class="parameter-value" type="text" placeholder="IPv4 subnet mask" data-tag="IP.netmask" />
            
            <label for="ip-gateway" class="parameter-label">gateway</label>
            <input id="ip-gateway"  class="parameter-value" type="text" placeholder="IPv4 gateway address" data-tag="IP.gateway" />
          </div>

          <div class="section listener">
            <div class="section-label">listener</div>
            <input class="parameter-value" type="text" placeholder="IPv4 address" data-tag="listener" />
            <input class="parameter-value" type="number" min="0" max="255" placeholder="auto-send interval" data-tag="interval" />
          </div>
          
          <div class="section datetime">
            <div class="section-label">date/time</div>
            <input class="parameter-value" type="datetime-local" data-tag="datetime" />
          </div>

          <div class="section doors">
            <div class="section-label">doors</div>
            <label for="door-id"    class="parameter-label">door</label>
            <input id="door-id"     class="parameter-value" type="number" min="1" max="4" placeholder="door" data-tag="door.id" />
            <label for="door-mode"  class="parameter-label">mode</label>
            <input id="door-mode"   class="parameter-value" type="number" min="1" max="3" placeholder="door control mode" value="3" data-tag="door.mode" />
            <label for="door-delay" class="parameter-label">delay</label>
            <input id="door-delay"  class="parameter-value" type="number" min="1" max="60" placeholder="door delay" value="5" data-tag="door.delay" />
            <label for="passcode1" class="parameter">
              Passcode 1
              <input id="passcode1" type="number" data-tag="door.passcode1" />
            </label>
            <label for="passcode2" class="parameter">
              Passcode 2
              <input id="passcode2" type="number" data-tag="door.passcode2" />
            </label>
            <label for="passcode3" class="parameter">
              Passcode 3
              <input id="passcode3" type="number" data-tag="door.passcode3" />
            </label>
            <label for="passcode4" class="parameter">
              Passcode 4
              <input id="passcode4" type="number" data-tag="door.passcode4" />
            </label>
          </div>

          <div class="section cards">
            <div class="section-label">card</div>
            <label for="card-number" class="parameter-label">number</label>
            <input id="card-number"  class="parameter-value" type="number" min="1" placeholder="card number" data-tag="card.number" />
            <label for="card-index" class="parameter-label">index</label>
            <input id="card-index"  class="parameter-value" type="number" min="1" placeholder="card index"  data-tag="card.index" />
            <label for="card-start-date" class="parameter-label">start date</label>
            <input id="card-start-date"  class="parameter-value" type="date" placeholder="card start date" data-tag="card.start-date" />
            <label for="card-end-date" class="parameter-label">end date</label>
            <input id="card-end-date"  class="parameter-value" type="date" placeholder="card end date"   data-tag="card.end-date" />
            <label for="card-doors-1" class="parameter-label">door 1</label>
            <input id="card-doors-1"  class="parameter-value" type="number" min="0" max="254" placeholder="permissions" data-tag="card.doors.1" />
            <label for="card-doors-2" class="parameter-label">door 2</label>
            <input id="card-doors-2"  class="parameter-value" type="number" min="0" max="254" placeholder="permissions" data-tag="card.doors.2" />
            <label for="card-doors-3" class="parameter-label">door 3</label>
            <input id="card-doors-3"  class="parameter-value" type="number" min="0" max="254" placeholder="permissions" data-tag="card.doors.3" />
            <label for="card-doors-4" class="parameter-label">door 4</label>
            <input id="card-doors-4"  class="parameter-value" type="number" min="0" max="254" placeholder="permissions" data-tag="card.doors.4" />
            <label for="card-pin" class="parameter-label">PIN</label>
            <input id="card-pin"  class="parameter-value" type="number" min="0" max="999999" placeholder="PIN" data-tag="card.PIN" />
          </div>

          <div class="section events">
            <div class="section-label">events</div>
            <label for="event-index" class="parameter-label">index</label>
            <input id="event-index"  class="parameter-value" type="number" min="1" placeholder="event index" data-tag="events.index" />
            <label for="record-special-events" class="parameter">
              Record special events
              <input id="record-special-events" type="checkbox" data-tag="events.record-special-events" checked />
            </label>
          </div>

          <div class="section profiles">
            <div class="section-label">time profiles</div>
            <label for="time-profile-id" class="parameter-label">profile id</label>
            <input id="time-profile-id"  class="parameter-value" type="number" min="2" max="254" data-tag="time-profile.id" value="2"/>
            <label for="time-profile-start-date" class="parameter-label">start date</label>
            <input id="time-profile-start-date"  class="parameter-value" type="date" data-tag="time-profile.start-date" />
            <label for="time-profile-end-date" class="parameter-label">end date</label>
            <input id="time-profile-end-date" class="parameter-value" type="date" data-tag="time-profile.end-date" />
            
            <label for="time-profile-weekdays" class="parameter-label">weekdays</label>
            <div id="time-profile-weekdays" class="weekdays">
              <label for="time-profile-monday" class="weekday">
                <input id="time-profile-monday" type="checkbox" data-tag="time-profile.monday"/>Mon</label>
              <label for="time-profile-tuesday" class="weekday">
                <input id="time-profile-tuesday" type="checkbox" data-tag="time-profile.tuesday"/>Tue</label>
              <label for="time-profile-wednesday" class="weekday">
                <input id="time-profile-wednesday" type="checkbox" data-tag="time-profile.wednesday"/>Wed</label>
              <label for="time-profile-thursday" class="weekday">
                <input id="time-profile-thursday" type="checkbox" data-tag="time-profile.thursday"/>Thu</label>
              <label for="time-profile-friday" class="weekday">
                <input id="time-profile-friday" type="checkbox" data-tag="time-profile.friday"/>Fri</label>
              <label for="time-profile-saturdday" class="weekday">
                <input id="time-profile-saturdday" type="checkbox" data-tag="time-profile.saturday"/>Sat</label>
              <label for="time-profile-sunday" class="weekday">
                <input id="time-profile-sunday"    type="checkbox" data-tag="time-profile.sunday"/>Sun</label>
            </div>
            
            <label for="time-profile-segment-1" class="parameter">
              segment 1
              <input id="time-profile-segment-1"     class="parameter" type="time" placeholder="start time" data-tag="time-profile.segment.1.start" />
              <input id="time-profile-segment-3-end" class="parameter" type="time" placeholder="end time" data-tag="time-profile.segment.1.end" />
            </label>
            
            <label for="time-profile-segment-2" class="parameter">
              segment 2
              <input id="time-profile-segment-2"     class="parameter" type="time" placeholder="start time" data-tag="time-profile.segment.2.start" />
              <input id="time-profile-segment-2-end" class="parameter" type="time" placeholder="end time" data-tag="time-profile.segment.2.end" />
            </label>
            
            <label for="time-profile-segment-3" class="parameter">
              segment 3
              <input id="time-profile-segment-3"     class="parameter" type="time" placeholder="start time" data-tag="time-profile.segment.3.start" />
              <input id="time-profile-segment-3-end" class="parameter" type="time" placeholder="end time" data-tag="time-profile.segment.3.end" />
            </label>
            
            <label for="linked-profile-id" class="parameter">
              linked profile id
              <input id="linked-profile-id" type="number" min="2" max="254" placeholder="profile id" data-tag="time-profile.linked-profile.id" />
            </label>
          </div>

          <div class="section tasks">
            <div class="section-label">task</div>
            <label class="parameter-label">task type</label>
            <select class="parameter-value" placeholder="task type" data-tag="task.type">
              <option value="0">door controlled</option>
              <option value="1">door normally open</option>
              <option value="2">door normally closed</option>
              <option value="3">disable time profile</option>
              <option value="4">enable time profile</option>
              <option value="5">card no password</option>
              <option value="6">card in password</option>
              <option value="7">card in out password</option>
              <option value="8">enable more cards</option>
              <option value="9">disable more cards</option>
              <option value="10">trigger once</option>
              <option value="11">disable push button</option>
              <option value="12">enable push button</option>
            </select>
            
            <label class="parameter-label">start date</label>
            <input class="parameter-value" type="date" data-tag="task.start-date" />
            <label class="parameter-label">end date</label>
            <input class="parameter-value" type="date" data-tag="task.end-date" />
            
            <label for="task-weekdays" class="parameter-label">weekdays</label>
            <div id="task-weekdays" class="weekdays">
              <label for="task-monday"    class="weekday"><input id="task-monday"    type="checkbox" data-tag="task.monday" />Mon</label>
              <label for="task-tuesday"   class="weekday"><input id="task-tuesday"   type="checkbox" data-tag="task.tuesday" />Tue</label>
              <label for="task-wednesday" class="weekday"><input id="task-wednesday" type="checkbox" data-tag="task.wednesday" />Wed</label>
              <label for="task-thursday"  class="weekday"><input id="task-thursday"  type="checkbox" data-tag="task.thursday" />Thu</label>
              <label for="task-friday"    class="weekday"><input id="task-friday"    type="checkbox" data-tag="task.friday" />Fri</label>
              <label for="task-saturdday" class="weekday"><input id="task-saturdday" type="checkbox" data-tag="task.saturday" />Sat</label>
              <label for="task-sunday"    class="weekday"><input id="task-sunday"    type="checkbox" data-tag="task.sunday" />Sun</label>
            </div>
            
            <label class="parameter-label">start time</label>
            <input class="parameter-value" type="time" placeholder="start time" data-tag="task.start-time" />

            <label class="parameter-label">door</label>
            <input class="parameter-value" type="number" min="1" max="4" placeholder="door" data-tag="task.door" />
            
            <label class="parameter-label">more cards</label>
            <input class="parameter-value" type="number" min="0" max="255" placeholder="number of cards" data-tag="task.more-cards" />
          </div>

          <div class="section control">
            <label for="pc-control" class="parameter">
              PC control
              <input id="pc-control" type="checkbox" data-tag="pc-control" checked />
            </label>
            <label for="interlock" class="parameter">
              Door interlock
              <input id="interlock" type="number" placeholder="interlock mode" data-tag="interlock" />
            </label>
            <label for="reader1" class="parameter">
              Reader 1 keypad
              <input id="reader1" type="checkbox" data-tag="reader1" />
            </label>
            <label for="reader2" class="parameter">
              Reader 2 keypad
              <input id="reader2" type="checkbox" data-tag="reader2" />
            </label>
            <label for="reader3" class="parameter">
              Reader 3 keypad
              <input id="reader3" type="checkbox" data-tag="reader3" />
            </label>
            <label for="reader4" class="parameter">
              Reader 4 keypad
              <input id="reader4" type="checkbox" data-tag="reader4" />
            </label>
          </div>

        </div>

        <div id="response" class="panel">
          <textarea></textarea>
        </div>

        <fieldset id="request" class="panel">
          <legend>Request</legend>
          <textarea></textarea>
        </fieldset>

        <fieldset id="reply" class="panel">
          <legend>Reply</legend>
          <textarea></textarea>
        </fieldset>
      </main>
    
      <footer>
        <p id="message"></p>
      </footer>
    </div>
  </body>

  <script type="module">
    import { 
      initialise,
      clear,
      select,
      execute, 
    } from './javascript/tunnel.js'

    window.clear = clear
    window.select = select
    window.execute = execute

    initialise()
  </script>

  <script>
    function onClear(event) {
      clear()
    }

    function onSelect(event) {
      select(event)
    }

    function onExecute(event) {
        execute(event)        
    }
  </script>

</html>